# StationAPI データ入力ガイド

このディレクトリには、日本の鉄道データを管理するための CSV ファイルが含まれています。データの整合性を保つため、以下のガイドラインに従ってデータ入力を行ってください。

## 📁 ファイル構成

| ファイル名                    | 説明                   |
| ----------------------------- | ---------------------- |
| `1!companies.csv`             | 鉄道会社情報           |
| `2!lines.csv`                 | 路線情報               |
| `3!stations.csv`              | 駅情報                 |
| `4!types.csv`                 | 列車種別情報           |
| `5!station_station_types.csv` | 駅と列車種別の関連情報 |
| `6!aliases.csv`               | 路線の別名・愛称情報   |
| `7!line_aliases.csv`          | 駅と路線別名の関連情報 |
| `8!connections.csv`           | 駅間の接続・距離情報   |

## 🏢 1!companies.csv - 鉄道会社情報

### フィールド説明

| フィールド名           | 型     | 必須 | 説明                                                 | 例                             |
| ---------------------- | ------ | ---- | ---------------------------------------------------- | ------------------------------ |
| `company_cd`           | 数値   | ✓    | 会社コード（ユニーク）                               | `1`                            |
| `rr_cd`                | 数値   | ✓    | 鉄道コード                                           | `11`                           |
| `company_name`         | 文字列 | ✓    | 会社名                                               | `JR北海道`                     |
| `company_name_k`       | 文字列 | ✓    | 会社名（カタカナ）                                   | `ジェイアールホッカイドウ`     |
| `company_name_h`       | 文字列 | ✓    | 会社正式名称                                         | `北海道旅客鉄道株式会社`       |
| `company_name_r`       | 文字列 | ✓    | 会社名（略称）                                       | `JR北海道`                     |
| `company_name_en`      | 文字列 | ✓    | 会社名（英語）                                       | `JR Hokkaido`                  |
| `company_name_full_en` | 文字列 | ✓    | 会社正式名称（英語）                                 | `JR Hokkaido`                  |
| `company_url`          | 文字列 | -    | 公式サイト URL                                       | `http://www.jrhokkaido.co.jp/` |
| `company_type`         | 数値   | ✓    | 会社種別（0:その他, 1:JR, 2:大手私鉄, 3:準大手私鉄） | `1`                            |
| `e_status`             | 数値   | ✓    | 状態フラグ（0:運用中, 1:運用前, 2:廃止）             | `0`                            |
| `e_sort`               | 数値   | ✓    | ソート順                                             | `1`                            |

### 入力時の注意点

- `company_cd`は他のレコードと重複しないよう注意
- URL は`http://`または`https://`で始める
- `company_type`: JR の場合は`1`, 大手私鉄の場合は`2`, 準大手私鉄の場合は`3`, その他の場合は`0`を使用

## 🚃 2!lines.csv - 路線情報

### フィールド説明

| フィールド名         | 型     | 必須 | 説明                                                                                     | 例                          |
| -------------------- | ------ | ---- | ---------------------------------------------------------------------------------------- | --------------------------- |
| `line_cd`            | 数値   | ✓    | 路線コード（ユニーク）                                                                   | `1002`                      |
| `company_cd`         | 数値   | ✓    | 会社コード（companies テーブルとリンク）                                                 | `3`                         |
| `line_name`          | 文字列 | ✓    | 路線名                                                                                   | `東海道新幹線`              |
| `line_name_k`        | 文字列 | ✓    | 路線名（カタカナ）                                                                       | `トウカイドウシンカンセン`  |
| `line_name_h`        | 文字列 | ✓    | 路線正式名称                                                                             | `東海道新幹線`              |
| `line_name_r`        | 文字列 | ✓    | 路線名（ローマ字）                                                                       | `Tokaido Shinkansen`        |
| `line_name_rn`       | 文字列 | ✓    | 路線名（ローマ字、正規化版）                                                             | `Tokaido Shinkansen`        |
| `line_name_zh`       | 文字列 | -    | 路線名（中国語）                                                                         | `东海道新干线`              |
| `line_name_ko`       | 文字列 | -    | 路線名（韓国語）                                                                         | `도카이도 신칸센`           |
| `line_color_c`       | 文字列 | ✓    | 路線カラー（16 進数）                                                                    | `#0000FF`                   |
| `line_type`          | 数値   | ✓    | 路線種別（0:その他, 1:新幹線, 2:一般, 3:地下鉄, 4:市電・路面電車, 5:モノレール・新交通） | `1`                         |
| `line_symbol1`       | 文字列 | -    | 路線記号 1                                                                               | `H`, `T`                    |
| `line_symbol2`       | 文字列 | -    | 路線記号 2                                                                               | `N`, `K`                    |
| `line_symbol3`       | 文字列 | -    | 路線記号 3                                                                               | `A`                         |
| `line_symbol4`       | 文字列 | -    | 路線記号 4                                                                               | `S`                         |
| `line_symbol1_color` | 文字列 | -    | 路線記号 1 の色                                                                          | `#F7931D`                   |
| `line_symbol2_color` | 文字列 | -    | 路線記号 2 の色                                                                          | `#0072BC`                   |
| `line_symbol3_color` | 文字列 | -    | 路線記号 3 の色                                                                          | `#000000`                   |
| `line_symbol4_color` | 文字列 | -    | 路線記号 4 の色                                                                          | `#ED1C23`                   |
| `line_symbol1_shape` | 文字列 | -    | 路線記号 1 の形状                                                                        | `ROUND`                     |
| `line_symbol2_shape` | 文字列 | -    | 路線記号 2 の形状                                                                        | `SQUARE`                    |
| `line_symbol3_shape` | 文字列 | -    | 路線記号 3 の形状                                                                        | `MONOCHROME_ROUND`          |
| `line_symbol4_shape` | 文字列 | -    | 路線記号 4 の形状                                                                        | `HALF_SQUARE_WITHOUT_ROUND` |
| `e_status`           | 数値   | ✓    | 状態フラグ（0:運用中, 1:運用前, 2:廃止）                                                 | `0`                         |
| `e_sort`             | 数値   | ✓    | ソート順                                                                                 | `1002`                      |
| `average_distance`   | 数値   | -    | 平均駅間距離（メートル）                                                                 | `30294.05713`               |

### 入力時の注意点

- `line_color_c`は必ず`#`で始まる 6 桁の 16 進数で入力
- `company_cd`は`1!companies.csv`に存在する値を使用
- `line_type`: 新幹線の場合は`1`, 一般の場合は`2`, 地下鉄の場合は`3`, 市電・路面電車の場合は`4`, モノレール・新交通の場合は`5`, その他の場合は`0`を使用
- 記号が複数ある場合は`line_symbol1`, `line_symbol2`...の順で入力

## 🚉 3!stations.csv - 駅情報

### フィールド説明

| フィールド名        | 型     | 必須 | 説明                                        | 例                              |
| ------------------- | ------ | ---- | ------------------------------------------- | ------------------------------- |
| `station_cd`        | 数値   | ✓    | 駅コード（ユニーク）                        | `100201`                        |
| `station_g_cd`      | 数値   | ✓    | 駅グループコード                            | `1130101`                       |
| `station_name`      | 文字列 | ✓    | 駅名                                        | `東京`                          |
| `station_name_k`    | 文字列 | ✓    | 駅名（カタカナ）                            | `トウキョウ`                    |
| `station_name_r`    | 文字列 | -    | 駅名（ローマ字）                            | `Tōkyō`                         |
| `station_name_rn`   | 文字列 | -    | 駅名（ローマ字、正規化版）                  | `Tokyo`                         |
| `station_name_zh`   | 文字列 | -    | 駅名（中国語）                              | `东京`                          |
| `station_name_ko`   | 文字列 | -    | 駅名（韓国語）                              | `도쿄`                          |
| `station_number1`   | 文字列 | -    | 駅番号・駅記号 1                            | `01`                            |
| `station_number2`   | 文字列 | -    | 駅番号・駅記号 2                            | `09`                            |
| `station_number3`   | 文字列 | -    | 駅番号・駅記号 3                            | `11`                            |
| `station_number4`   | 文字列 | -    | 駅番号・駅記号 4                            | `14`                            |
| `three_letter_code` | 文字列 | -    | スリーレターコード                          | `TYO`                           |
| `line_cd`           | 数値   | ✓    | 路線コード（lines テーブルとリンク）        | `1002`                          |
| `pref_cd`           | 数値   | ✓    | 都道府県コード                              | `13`                            |
| `post`              | 文字列 | ✓    | 郵便番号                                    | `100-0005`                      |
| `address`           | 文字列 | ✓    | 住所                                        | `東京都千代田区丸の内一丁目9-1` |
| `lon`               | 数値   | ✓    | 経度                                        | `139.766084`                    |
| `lat`               | 数値   | ✓    | 緯度                                        | `35.681382`                     |
| `open_ymd`          | 文字列 | ✓    | 開業年月日（YYYY-MM-DD）                    | `1914-12-20`                    |
| `close_ymd`         | 文字列 | ✓    | 廃止年月日（YYYY-MM-DD, 現役は 0000-00-00） | `0000-00-00`                    |
| `e_status`          | 数値   | ✓    | 状態フラグ（0:運用中, 1:運用前, 2:廃止）    | `0`                             |
| `e_sort`            | 数値   | ✓    | ソート順                                    | `100201`                        |

### 入力時の注意点

- `line_cd`は`2!lines.csv`に存在する値を使用
- 座標は世界測地系（WGS84）で入力
- 現役の駅の場合、`close_ymd`は`0000-00-00`
- 郵便番号は`000-0000`形式で入力
- 都道府県コードは総務省の標準コードを使用

## 🚄 4!types.csv - 列車種別情報

### フィールド説明

| フィールド名   | 型     | 必須 | 説明                                                               | 例        |
| -------------- | ------ | ---- | ------------------------------------------------------------------ | --------- |
| `id`           | 数値   | ✓    | 主キー（1 から始まる連番）                                         | `1`       |
| `type_cd`      | 数値   | ✓    | 種別コード                                                         | `1`       |
| `type_name`    | 文字列 | ✓    | 種別名                                                             | `のぞみ`  |
| `type_name_k`  | 文字列 | ✓    | 種別名（カタカナ）                                                 | `ノゾミ`  |
| `type_name_r`  | 文字列 | ✓    | 種別名（ローマ字）                                                 | `Nozomi`  |
| `type_name_zh` | 文字列 | ✓    | 種別名（中国語）                                                   | `希望`    |
| `type_name_ko` | 文字列 | ✓    | 種別名（韓国語）                                                   | `노조미`  |
| `color`        | 文字列 | ✓    | 種別カラー（16 進数）                                              | `#FFD400` |
| `direction`    | 数値   | -    | 方向フラグ（0:方向制限なし, 1:上り, 2:下り）                       | `0`       |
| `kind`         | 数値   | -    | 種別区分（0:基本, 1:支線, 2:快速, 3:急行, 4:特急, 5:高速運転快速） | `4`       |
| `priority`     | 数値   | ✓    | 優先度（数値が高いほどアプリ上で上に表示）                         | `0`       |

### 入力時の注意点

- `color`は必ず`#`で始まる 6 桁の 16 進数で入力
- `kind`: 特急の場合は`4`, 急行の場合は`3`, 快速の場合は`2`, 支線の場合は`1`, 基本の場合は`0`, 高速運転快速の場合は`5`を使用
- `priority`は数値が大きいほど優先度が高い（アプリ上で上に表示される）

## 🔗 5!station_station_types.csv - 駅と列車種別の関連情報

### フィールド説明

| フィールド名    | 型   | 必須 | 説明                                                                         | 例       |
| --------------- | ---- | ---- | ---------------------------------------------------------------------------- | -------- |
| `id`            | 数値 | ✓    | 主キー（1 から始まる連番）                                                   | `1`      |
| `station_cd`    | 数値 | ✓    | 駅コード（stations テーブルとリンク）                                        | `100201` |
| `type_cd`       | 数値 | ✓    | 種別コード（types テーブルとリンク）                                         | `1`      |
| `line_group_cd` | 数値 | ✓    | 路線グループコード（種別ごとの連番）                                         | `1`      |
| `pass`          | 数値 | -    | 通過フラグ（0:停車, 1:通過, 2:一部通過, 3:平日停車, 4:休日停車, 5:一部停車） | `0`      |

### 入力時の注意点

- `station_cd`は`3!stations.csv`に存在する値を使用
- `type_cd`は`4!types.csv`に存在する値を使用
- `pass`: 停車の場合は`0`, 通過の場合は`1`, 一部通過の場合は`2`, 平日停車の場合は`3`, 休日停車の場合は`4`, 一部停車の場合は`5`

## 📛 6!aliases.csv - 路線の別名・愛称情報

### フィールド説明

| フィールド名   | 型     | 必須 | 説明                       | 例                         |
| -------------- | ------ | ---- | -------------------------- | -------------------------- |
| `id`           | 数値   | ✓    | 主キー（1 から始まる連番） | `1`                        |
| `line_name`    | 文字列 | -    | 別名・愛称                 | `東武スカイツリーライン`   |
| `line_name_k`  | 文字列 | -    | 別名・愛称（カタカナ）     | `トウブスカイツリーライン` |
| `line_name_h`  | 文字列 | -    | 別名・愛称正式名称         | -                          |
| `line_name_r`  | 文字列 | -    | 別名・愛称（ローマ字）     | `Tobu Skytree Line`        |
| `line_name_zh` | 文字列 | -    | 別名・愛称（中国語）       | `东武晴空塔线`             |
| `line_name_ko` | 文字列 | -    | 別名・愛称（韓国語）       | `도부 스카이트리 라인`     |
| `line_color_c` | 文字列 | -    | 専用カラー（16 進数）      | `#0067C0`                  |

### 入力時の注意点

- 欠番の場合は、`line_name`に「欠番」と入力し、他は空欄
- カラーのみの定義の場合、`line_name`などは空欄でも可

## 🔗 7!line_aliases.csv - 駅と路線別名の関連情報

### フィールド説明

| フィールド名 | 型   | 必須 | 説明                                   | 例        |
| ------------ | ---- | ---- | -------------------------------------- | --------- |
| `id`         | 数値 | ✓    | 主キー（1 から始まる連番）             | `1`       |
| `station_cd` | 数値 | ✓    | 駅コード（stations テーブルとリンク）  | `2100201` |
| `alias_cd`   | 数値 | ✓    | 別名コード（aliases テーブルとリンク） | `1`       |

### 入力時の注意点

- `station_cd`は`3!stations.csv`に存在する値を使用
- `alias_cd`は`6!aliases.csv`に存在する値を使用

## 🚇 8!connections.csv - 駅間の接続・距離情報

> ⚠️ **注意**: このファイルは現在どこでも使用されていません。将来的に経路計算機能で使用される予定ですが、実装時期は未定です。

### フィールド説明

| フィールド名  | 型   | 必須 | 説明                 | 例            |
| ------------- | ---- | ---- | -------------------- | ------------- |
| `id`          | 数値 | ✓    | 主キー（設計未確定） | `1`           |
| `station_cd1` | 数値 | ✓    | 起点駅コード         | `100201`      |
| `station_cd2` | 数値 | ✓    | 終点駅コード         | `100202`      |
| `distance`    | 数値 | -    | 駅間距離（メートル） | `6140.152858` |

### 入力時の注意点

- 駅コードは`3!stations.csv`に存在する値を使用
- 距離はメートル単位で入力
- 方向性がある場合は、両方向のレコードを作成
- **現在は使用されていないため、データ入力の優先度は低い**
- **将来的な実装時に仕様が変更される可能性がある**

## 📝 共通ガイドライン

### データ入力の基本ルール

1. **文字エンコーディング**: UTF-8 で保存
2. **改行コード**: LF（Unix 形式）
3. **区切り文字**: カンマ（,）
4. **引用符**: フィールドにカンマや改行が含まれる場合のみダブルクォート（"）で囲む

### 必須チェック項目

- [ ] 他のファイルで参照されている値が実際に存在するか確認
- [ ] 必須フィールドに空値がないか確認
- [ ] 日付形式が正しいか確認（YYYY-MM-DD）
- [ ] カラーコードが正しい形式か確認（#RRGGBB）
- [ ] 数値フィールドに数字以外の文字が入っていないか確認

### 路線記号の形状（line_symbol_shape）について

路線記号の形状には以下の値を使用できます：

- `NOOP`
- `ROUND`
- `ROUND_HORIZONTAL`
- `REVERSED_ROUND`
- `REVERSED_ROUND_HORIZONTAL`
- `MONOCHROME_ROUND`
- `SQUARE`
- `REVERSED_SQUARE`
- `REVERSED_SQUARE_DARK_TEXT`
- `REVERSED_SQUARE_WEST`
- `REVERSED_SQUARE_WEST_DARK_TEXT`
- `REVERSED_SQUARE_HORIZONTAL`
- `HALF_SQUARE`
- `HALF_SQUARE_WITHOUT_ROUND`
- `HALF_SQUARE_DARK_TEXT`
- `ODAKYU`
- `HAKONE`
- `KEIO`
- `TWR`
- `NEW_SHUTTLE`
- `KEIKYU`
- `KINTETSU`
- `NANKAI`
- `KEIHAN`
- `HANKYU`
- `HANSHIN`
- `SANYO`
- `JR_UNION`
- `BULLET_TRAIN_UNION`
- `NUMBER_ONLY`
- `KEISEI`
- `NTL`
- `SMR`
- `NISHITETSU`
- `IZUHAKONE`

### データの整合性

1. **会社 → 路線 → 駅**の関連性を保つ（路線は必ず会社に、駅は必ず路線に紐づく）
2. 同じファイル内で同じ駅の情報が重複しないよう注意（`3!stations.csv`など）
3. 廃止された駅や路線は`e_status`を`2`に設定、運用前の場合は`1`に設定
4. 座標データは正確な位置情報を使用（公式資料、地図サービス等で確認可能な信頼できる情報）

## 🆘 困ったときは

データ入力で不明な点がある場合は、以下を確認してください：

1. 既存のデータ例を参照
2. `create_table.sql`でテーブル構造を確認
3. 公式な鉄道会社の情報を参照
4. 不明な場合は Issue で質問、または [Discord サーバ](https://discord.gg/vUW7Fg2XaR)で相談

## 📚 参考リンク

- [都道府県コード一覧](https://www.soumu.go.jp/denshijiti/code.html)
- [座標変換ツール](https://www.gsi.go.jp/sokuchikijun/sokuchikijun60003.html)
- [鉄道事業者一覧](https://www.mlit.go.jp/tetudo/)

---

**注意**: データの品質は最終的な API の品質に直結します。正確で一貫性のあるデータ入力にご協力ください。なお、データの変更は Pull Request のマージ後に開発環境での動作確認を経て本番環境に反映されます。
